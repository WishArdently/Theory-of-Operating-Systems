## 设备管理

### 一、基本概念

#### 1、设备分类

**按使用特性：**存储设备、输入输出设备、终端设备、脱机设备

**按数据传输率**：低速设备、中速设备、高速设备

**按传输交换单位**：字符设备、块设备

**按系统观点**：独占设备、共享设备、虚拟设备（独占设备+虚拟技术）

#### 2、设备管理的主要任务

（1）选择和分配输入输出设备以便进行数据传输操作

（2）控制输入输出设备和CPU（或内存）之间交换数据

（3）提供友好的透明接口，屏蔽设备硬件特性

（4）实现操作系统的最佳效率：提高设备之间、CPU和设备之间以及进程之间的并行操作度。

#### 3、设备管理的主要功能

（1）提供和进程管理管理系统的结构

（2）进行设备分配

（3）实现设备之间、CPU和设备之间的并行操作

（4）进行缓冲区管理

### 二、数据传送控制方式

#### 1、程序直接控制方式

传送字，CPU干预频率极高

#### 2、中断驱动方式

传送字，CPU干预频率高

#### 3、DMA方式（Direct Memory Access）

传送块，CPU干预频率中

#### 4、通道控制方式

通道是一种硬件，可以执行通道指令。

传送一组块，CPU干预频率低

### 三、中断技术

详见进程管理和csapp

（1）外中断

（2）内中断——trap、fault、abort

### 四、缓冲技术

#### 1、目标

减少中断次数

#### 2、原理

空间换时间

#### 3、种类

**（1）单缓冲**

在设备和处理机之间设置一个缓冲器。

可设置**双缓冲**解决两台外设、打印机和终端之间的并行操作问题。

**（2）多缓冲**

把多个缓冲区连接起来组成两部分，分贝用于输入和输出

**（3）缓冲池**

把多个缓冲区连接起来统一管理，既可用于输入，又可用于输出的缓冲结构。

**缓冲器是临界资源**

### 五、Spooling技术

Simultaneous Peripheral operation On-Line外部设备联机并行操作。

是**低速输入输出设备与主机交换的一种技术**，有时称为“假脱机真联机”；

核心思想：以联机的方式得到脱机的效果。



**输入井和输出井**：在磁盘上开辟的两个大存储空间

用于暂存I/O设备输入的数据和用户程序输出的数据。

**输入缓冲区和输出缓冲区**：缓和CPU和磁盘速度不匹配

用于暂存*输入设备*送来的数据，以后再传送到输入井。

用于暂存*输出井*送来的数据，以后再传送到输出设备



**输入进程**模拟脱机输入时的外围控制机。

**输出进程**模拟脱机输出时的外围控制机。



Spooling系统

<img src="C:\Users\16958\AppData\Roaming\Typora\typora-user-images\image-20231224151628640.png" alt="image-20231224151628640" style="zoom:67%;" />

